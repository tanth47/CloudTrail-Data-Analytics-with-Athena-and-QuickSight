[
{
	"uri": "https://tanth47.github.io/CloudTrail-Data-Analytics-with-Athena-and-QuickSight/",
	"title": "CloudTrail Data Analytics with Athena and QuickSight",
	"tags": [],
	"description": "",
	"content": "CloudTrail Data Analytics with Athena and QuickSight Objective In this workshop, participants will explore the depth of AWS CloudTrail\u0026rsquo;s data analytics capabilities. Utilizing Amazon Athena and Amazon QuickSight, we\u0026rsquo;ll transform raw CloudTrail logs into insightful visualizations.\nScenario: As an AWS administrator, you\u0026rsquo;re tasked with monitoring and analyzing user interactions across various AWS services. AWS CloudTrail captures these events, and you aim to query, analyze, and visualize this data to gain actionable insights.\nBrief Overview Participants will journey through the AWS landscape, starting with CloudTrail event capture, querying this data with Athena, and finally visualizing the insights using QuickSight.\nKey Components: AWS CloudTrail: Captures AWS service events. Amazon S3: Stores the CloudTrail logs. Amazon Athena: Queries the CloudTrail logs stored in S3. Amazon QuickSight: Visualizes the data fetched from Athena. Content Introduction Preparation Creating a CloudTrail Adding a Secondary IAM User Investigating with Amazon Athena Visualizing Athena Data in Amazon QuickSight Clean Up Resources Duration: Approximately 45 minutes\n"
},
{
	"uri": "https://tanth47.github.io/CloudTrail-Data-Analytics-with-Athena-and-QuickSight/2-preparation/2.1-create-ec2-instance/",
	"title": "Create an EC2 Instance",
	"tags": [],
	"description": "",
	"content": "Introduction Before enabling CloudTrail, we\u0026rsquo;ll set up an Amazon Elastic Compute Cloud (Amazon EC2) instance to function as a web server. This will allow us to simulate the actions of a user shutting down a web server.\nStep-by-Step Guide to Create an EC2 Instance Access EC2 Management Console: Navigate to the EC2 service administration interface.\nLaunch Instance: Click on Launch Instance to initiate the creation process.\nName the Instance: Provide a name for your instance by setting the \u0026ldquo;Name\u0026rdquo; tag. For example: workshop2-instances\nChoose an Amazon Machine Image (AMI): Select the desired AMI. For example: Amazon Linux 2 AMI.\nSelect an Instance Type: Choose the t2.micro instance type and proceed.\nConfigure Key Pair: Choose Proceed without a key pair\nLaunch the Instance: Click Launch Instance.\nCreate Ec2 instance successfully\nImportant: Once the EC2 instance is launched, make sure to note down the EC2 instance ID for future use. Example of Ec2 instnce ID: i-08622517ee43ef4ed\nUpcoming Steps With the EC2 instance up and running, we\u0026rsquo;re now set to simulate user interactions and monitor them using AWS CloudTrail.\n"
},
{
	"uri": "https://tanth47.github.io/CloudTrail-Data-Analytics-with-Athena-and-QuickSight/6-quicksight/6.1-creating-quicksight/",
	"title": "Creating QuickSight Account and Dataset",
	"tags": [],
	"description": "",
	"content": "Introduction In this section, we\u0026rsquo;ll guide you through the initial setup of Amazon QuickSight, from accessing the service to creating a dataset from Athena.\nStep-by-Step Guide to Create QuickSight Account and Dataset Access QuickSight in AWS Management Console: Navigate to AWS Management Console, locate and choose QuickSight.\nSign Up for QuickSight: If it\u0026rsquo;s your first time, sign up for a subscription. Choose the Standard subscription and proceed. Enter QuickSight Account Details: Provide a globally unique name for the QuickSight account (e.g., workshop2-quicksight). Enter a valid email address. For AWS services, select Amazon S3 and choose all related Athena and CloudTrail buckets. Grant QuickSight S3 Access: Scroll down to QuickSight access to AWS services. Add Amazon S3 and select all related Athena and CloudTrail buckets. After all, hit Finish. Your QuickSight account will be created and ready to use. To start creating visualizations, choose Go to Amazon QuickSight.\nCreate New Dataset: In the navigation pane, choose Datasetsand then New dataset. Select Athena as the data source. Name it athena1, and proceed. Choose the Athena table related to CloudTrail then hit Select. Change option to Directly query your data. Upcoming Steps After setting up your QuickSight account and creating the initial dataset, the next phase involves diving deeper into data visualization. In the subsequent section, you\u0026rsquo;ll:\nCreate specific visualizations based on the Athena data. Customize these visualizations to gain meaningful insights. Create a dedicated dataset to filter and focus on specific user activities. Convert visual data representations, like transforming bar charts into pie charts for better clarity. "
},
{
	"uri": "https://tanth47.github.io/CloudTrail-Data-Analytics-with-Athena-and-QuickSight/1-introduce/",
	"title": "Introduction",
	"tags": [],
	"description": "",
	"content": "Workshop Overview In the ever-evolving landscape of AWS, understanding user interactions and events is crucial. This workshop is designed to guide you through the intricacies of AWS CloudTrail\u0026rsquo;s data analytics capabilities. By the end, you\u0026rsquo;ll be proficient in transforming raw CloudTrail logs into actionable insights using Amazon Athena and Amazon QuickSight.\nWhat Will You Learn? AWS CloudTrail: Understand the significance of CloudTrail and how it captures AWS service events. Amazon S3: Learn how CloudTrail logs are stored and organized in S3. Amazon Athena: Dive deep into querying CloudTrail logs using Athena\u0026rsquo;s powerful SQL capabilities. Amazon QuickSight: Visualize and interpret the queried data, transforming it into insightful dashboards and reports. Prerequisites Basic understanding of AWS services. An active AWS account. Familiarity with data analytics concepts. Let\u0026rsquo;s Get Started! Navigate through the sections in the order provided to get the most out of this workshop. Each section builds upon the previous one, ensuring a comprehensive learning experience.\nReady to embark on this analytical journey? Let\u0026rsquo;s dive in!\n"
},
{
	"uri": "https://tanth47.github.io/CloudTrail-Data-Analytics-with-Athena-and-QuickSight/2-preparation/",
	"title": "Preparation",
	"tags": [],
	"description": "",
	"content": "In this preparation section, you\u0026rsquo;ll set up the necessary resources and configurations to monitor and analyze AWS CloudTrail data. This involves creating an EC2.\nContent Create an EC2 Instance "
},
{
	"uri": "https://tanth47.github.io/CloudTrail-Data-Analytics-with-Athena-and-QuickSight/3-creating-cloudtrail/",
	"title": "Creating a CloudTrail",
	"tags": [],
	"description": "",
	"content": "Introduction AWS CloudTrail is a service that enables governance, compliance, operational auditing, and risk auditing of your AWS account. In this section, we\u0026rsquo;ll configure CloudTrail to capture and log events related to our AWS resources.\nStep-by-Step Guide to Configure CloudTrail Access CloudTrail Management Console: Navigate to the CloudTrail service administration interface.\nCreate a New Trail: Click on Create trail.\nName your Trail Provide a name for your trail, for instance, WorkshopTrail.\nSet S3 Bucket: In the Trail log bucket and folder box, keep the default name suggestion.\nS3 bucket is the bucket where CloudTrail will store information. Make sure that you copy this bucket name because you will need it when you create the Amazon Athena table. For example: aws-cloudtrail-logs-615700818209-da15e5f3\nConfigure Settings: Disable Log file SSE-KMS encryption. Scroll down and click Next.\nChoose log events: On the next page, select Management events, Data events and Insights events.\nData Events: Storage using S3 and we will log all events.\nInsight Events:\nCloudTrail Insights, additional charges apply, because it\u0026rsquo;s doing some sort of machine learning under the hood.\nNext: Scroll down to the bottom of the page and choose Next.\nFinalize CloudTrail Configuration: Review all settings and click Create to finalize the CloudTrail configuration.\nCreating CloudTrail successfully\nUpcoming Steps With CloudTrail configured, we\u0026rsquo;re now set to capture AWS events and further analyze them using tools like Amazon Athena.\n"
},
{
	"uri": "https://tanth47.github.io/CloudTrail-Data-Analytics-with-Athena-and-QuickSight/4-adding-iam-user/",
	"title": "Adding a Secondary IAM User",
	"tags": [],
	"description": "",
	"content": "Introduction To simulate user interactions and monitor them using AWS CloudTrail, we\u0026rsquo;ll add a secondary IAM user named \u0026ldquo;workshop2-user\u0026rdquo; with specific permissions.\nStep-by-Step Guide to Add the IAM User \u0026ldquo;workshop2-user\u0026rdquo; Access IAM Management Console: In the AWS Management Console, open the list of all AWS services by choosing Services, and locate and choose IAM.\nUsers Section: In the navigation pane, choose Users and then choose Create user.\nEnter User Name: For the User name field, enter workshop2-user. Select AWS Management Console access\nSet Access Type: Choose I want to create an IAM user. For Console password, choose Custom password and enter a password for the workshop2-user user. Clear the User must create a new password at next sign-in check box. Choose Next.\nAttach Policies: On the Set permissions page, choose Attach existing policies directly. Search for and select AmazonEC2FullAccess and AmazonS3FullAccess.\nFinalize User Creation: Choose Next: Tags, then Next: Review, and then Create user.\nCopy IAM Sign-in URL: After creating the user, copy the displayed IAM sign-in URL. If you missed copying the URL, you can find it on the main IAM page by opening the IAM dashboard.\nLog in as \u0026ldquo;workshop2-user\u0026rdquo;: Log out of the AWS Management Console and log back in using the \u0026ldquo;workshop2-user\u0026rdquo; user credentials using the sign-in URL. Verify you\u0026rsquo;re logged in as \u0026ldquo;workshop2-user\u0026rdquo; by checking the upper-right area of the AWS Management Console.\nIssue API Calls: Navigate through the AWS Management Console to issue some API calls. All actions will be captured by CloudTrail. For example: Navigate to the Ec2 Dashboard, IAM Dashboard or Cloud Trail Dashboard.\nAlmost your clicks on screen will make an API call.\nShut Down an EC2 Instance: While logged in as \u0026ldquo;workshop2-user\u0026rdquo;, shut down an EC2 instance. Ensure you don\u0026rsquo;t need the instance or that you created an additional one specifically for this exercise. Log Back in as Administrator: Log out as \u0026ldquo;workshop2-user\u0026rdquo; and log back in as the administrator to proceed with querying CloudTrail data using Amazon Athena. Ensure you remember the password and URL set for the \u0026ldquo;workshop2-user\u0026rdquo; as you\u0026rsquo;ll need it to log in.\nNavigate to S3 CloudTrail Bucket: Access the S3 service and navigate to the CloudTrail bucket (aws-cloudtrail-logs). This bucket contains logs of all activities captured by CloudTrail. Inspect CloudTrail Logs: Dive deeper into the AWSLogs, followed by your account ID, CloudTrail, the region (e.g., ap-southeast-1), and then the specific date. Here, you\u0026rsquo;ll find compressed text files that represent the logged activities. Open a Log File: Select one of the compressed text files and open it using the \u0026ldquo;Object actions\u0026rdquo; option. This will display the raw log data, which can be challenging to interpret directly due to its format and volume. Here\u0026rsquo;s the Log Navigating and analyzing raw CloudTrail logs can be cumbersome, especially during urgent situations where quick insights are needed. The raw logs are not an end-to-end data analytics solution. Instead of manually sifting through raw logs, we can leverage Amazon Athena. Athena allows us to query CloudTrail logs using SQL, providing a more efficient way to extract meaningful insights from the data.\nUpcoming Steps With the \u0026ldquo;workshop2-user\u0026rdquo; created and set up, we\u0026rsquo;re now ready to simulate user interactions and monitor them using AWS CloudTrail and Amazon Athena.\n"
},
{
	"uri": "https://tanth47.github.io/CloudTrail-Data-Analytics-with-Athena-and-QuickSight/5-athena/",
	"title": "Investigating with Amazon Athena",
	"tags": [],
	"description": "",
	"content": "Introduction To investigate AWS resource interactions, we\u0026rsquo;ll use Amazon Athena. Athena allows us to create tables pointing to S3 buckets, facilitating the querying of CloudTrail logs.\nStep-by-Step Guide to Investigate with Amazon Athena Access CloudTrail in AWS Management Console: Navigate to the list of all AWS services by choosing Services, and locate and choose CloudTrail.\nNavigate to Event History: In the navigation pane, choose Event history and then select Create Athena table. Choose Storage Location: For Storage location, select the bucket you created during the CloudTrail configuration. This action updates the SQL command to use the appropriate bucket location. Create Athena Table: Click on Create table. You now have an Athena table structured like CloudTrail and pointing to the S3 bucket used by CloudTrail. You now have an Athena table with the same schema that is used by CloudTrail. The table points to the recently created S3 bucket that is used by CloudTrail. Access Athena in AWS Management Console: Return to the list of AWS services, locate and choose Athena.\nConfigure Athena Settings: If it\u0026rsquo;s your first time using Athena, configure the settings. In the upper-right corner, choose Settings. Then, select an S3 bucket for Athena query results. A suitable bucket might already exist, often named starting with aws-athena-query-results. Query Result Storage: Select another S3 bucket for the Athena query result location by choosing the Select button. A bucket might have been automatically created for this purpose, so you might only need to select a bucket with a name that starts with aws-athena-query-results. Run Queries: With Athena set up, you can run SQL queries to analyze CloudTrail logs. For instance, to get the activity history of an EC2 instance, use the provided SQL query, replacing placeholders with your specific details.\nSELECT * FROM YOUR-ATHENA-TABLE-HERE WHERE eventsource = \u0026#39;ec2.amazonaws.com\u0026#39; AND requestparameters LIKE \u0026#39;%YOUR-INSTANCE-ID-HERE%\u0026#39; AND responseelements != \u0026#39;null\u0026#39;; You can find you table name here: Here\u0026rsquo;s example result: The power of Athena lies in its ability to quickly query vast amounts of data. By converting CloudTrail logs into structured tables, we can derive insights more efficiently than sifting through raw logs.\nTracking user action: This query should reveal that the \u0026ldquo;workshop2-use\u0026rdquo; user issued an API call that shut down the web server. The following query shows you the other actions that \u0026ldquo;workshop2-user\u0026rdquo; did in the AWS account: SELECT * FROM YOUR-ATHENA-TABLE-HERE WHERE useridentity.username LIKE \u0026#39;workshop2-user\u0026#39;; Upcoming Steps With the insights derived from Athena, we can visualize this data in Amazon QuickSight, such as creating pie charts of successful and failed requests. The next section will delve into creating these visualizations.\n"
},
{
	"uri": "https://tanth47.github.io/CloudTrail-Data-Analytics-with-Athena-and-QuickSight/6-quicksight/",
	"title": "Visualizing Athena Data in Amazon QuickSight",
	"tags": [],
	"description": "",
	"content": "In this section, we\u0026rsquo;ll guide you through the process of setting up QuickSight and visualizing the Athena data.\nContent Creating QuickSight Account and Dataset Visualizing Data in QuickSight "
},
{
	"uri": "https://tanth47.github.io/CloudTrail-Data-Analytics-with-Athena-and-QuickSight/6-quicksight/6.2-visualizing-data/",
	"title": "Visualizing Data in QuickSight",
	"tags": [],
	"description": "",
	"content": "Introduction With the dataset in place, we can now proceed to visualize the Athena data in QuickSight. This section will guide you through creating and customizing visualizations.\nCreating a Custome Dashboard Access QuickSight Admin Settings: Navigate to QuickSight and choose Admin. In the upper-right corner, select Manage QuickSight. Set Security \u0026amp; Permissions: On the sidebar, opt for Security \u0026amp; permissions. Within the QuickSight access to AWS services option, click Manage. Here, select Amazon S3 and choose all the Athena and CloudTrail related buckets. Choose Save. Return to Visualization: Navigate to the upper-left corner and click on the QuickSight logo. Choose Dashboard: Choose CloudTrail dashboard. Plot example chart: In the Fields list, select eventname. This action will trigger an Athena query, populating a visualization. Remember that I am still not filtering by the user. I\u0026rsquo;m just getting every single API call that is happening in my AWS account. And the reason why PutObject has way more here, is because when CloudTrail adds things to S3, it is doing a PutObject operation\nAnalyzing Actions of workshop2-user Return to Visualization: Navigate to the upper-left corner and click on the QuickSight logo. Navigate to Datasets: From the QuickSight dashboard. Choose Datasets. Then click New dataset. Initiate New Dataset: Select Athena. For the Data source name, input athena2 and confirm with Create data source. Choose option for Use custom SQL. Custom SQL for User \u0026lsquo;workshop2-user\u0026rsquo;: Name the custom SQL query as workshop2-user-activity. Insert the following SQL, ensuring to replace YOUR-ATHENA-TABLE-HERE with your specific Athena table name:\nSELECT * FROM cloudtrail_logs_aws_cloudtrail_logs_615700818209_da15e5f3 WHERE useridentity.username LIKE \u0026#39;workshop2-user\u0026#39;; Plot Chart: In Fields List choose useragent. Customize visual type We can also add others chart to our dashboard. Example: Click out the dashboard. Then in Fields list choose eventname. Result: Remember to unsubscribe from QuickSight after completing these steps to avoid incurring unnecessary costs.\nConclusion In this section, we delved deep into the actions of the workshop2-user by leveraging the power of Amazon QuickSight and Athena. By creating custom datasets and visualizations, we were able to gain insights into the user\u0026rsquo;s activities and interactions with AWS resources. This approach not only simplifies the process of analyzing user actions but also provides a visual representation, making it easier to identify patterns or anomalies. As organizations scale and user activities increase, such visual analytics will be crucial in ensuring smooth operations and security compliance.\n"
},
{
	"uri": "https://tanth47.github.io/CloudTrail-Data-Analytics-with-Athena-and-QuickSight/7-clean-up/",
	"title": "Clean Up Resources",
	"tags": [],
	"description": "",
	"content": "Ensuring that you clean up your resources after your experiments or projects is crucial to avoid incurring unnecessary costs. Here\u0026rsquo;s a step-by-step guide to help you clean up the resources used in this workshop:\nAmazon QuickSight:If you no longer plan to use Amazon QuickSight, remember to unsubscribe to avoid any charges.\nNavigate to Manage QuickSight. Click Delete account. Type confirm and click Delete account. Unsubscribe successful. Amazon Athena:\nGo to the Athena console. In the Query Editor, find and delete the tables you\u0026rsquo;ve created for this workshop. Type table name and click Delete.\nComplete Amazon S3:\nAccess the S3 console. Locate and delete the S3 buckets associated with this workshop. Choose Bucket and click Empty. Type permanently delete and click Empty. Choose Bucket and click Delete. Type bucket name and click Delete. Successfully deleted bucket Do the same manner for the rest. IAM Roles and Users:\nVisit the IAM console. Delete any roles or users (workshop2-user and others) that were specifically created for this workshop. Amazon EC2 (if used):\nOpen the EC2 console. Terminate any instances that were launched for this workshop. Also, remember to release any associated Elastic IPs to avoid charges. CloudTrail:\nNavigate to the CloudTrail console. Navigate to Dashboard and open the trail you created. Click on Delete and hit Delete again. Conclusion You\u0026rsquo;ve successfully cleaned up all the resources you created during this workshop. It\u0026rsquo;s always a good practice to delete unused resources to avoid incurring unnecessary costs.\n"
},
{
	"uri": "https://tanth47.github.io/CloudTrail-Data-Analytics-with-Athena-and-QuickSight/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "https://tanth47.github.io/CloudTrail-Data-Analytics-with-Athena-and-QuickSight/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]